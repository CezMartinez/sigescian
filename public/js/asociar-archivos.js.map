{"version":3,"sources":["asociar_archivos.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"asociar-archivos.js","sourcesContent":["\n/**\n * Created by otro on 4/11/16.\n */\n$(document).ready(function ()\n{\n    initData()\n});\nfunction changedata(elemen_id, second_element, url)\n{\n    $(\"#\" + second_element).removeAttr('disabled', false)\n    $(\"#\" + second_element).empty()\n    var id_procedure = $(\"#\" + elemen_id).val();\n    url = url + id_procedure;\n    $.ajax({\n        type: 'GET',\n        dataType: 'json',\n        url: url,\n        success: function (json)\n        {\n            var obj = json;\n            var arr = [];\n            for (elem in obj) {\n                arr.push(obj[elem]);\n            }\n            $(\"#\" + second_element).select2({placeholder: \"Seleccione uno o varios formatos\", data: arr});\n        },\n    })\n}\n/**\n * Asociar procedimiento con archivo\n *\n * @param url\n * @param file_tipe\n * @param id_procedure\n */\nfunction asociar(url, second_el)\n{\n    var second_element = $(\"#\" + second_el);\n    var files = second_element.val();\n    var csrf = $(\"meta[name='csrf_token']\").attr('content');\n    if(files == null){\n        swal(\"Error\", \"Tienes que seleccionar uno o mas archivos\", \"error\");\n    }else{\n        $.ajax({\n            type: \"POST\",\n            url: url,\n            headers: {\n                'X-CSRF-Token': csrf,\n            },\n            data: {\n                files: files,\n            },\n            success: function ()\n            {\n                refreshlist(second_el)\n            },\n            error: function (data)\n            {\n                swal(\"Error\", \"data\", \"error\");\n            }\n        })\n    }\n}\n\nfunction refreshlist(elemento){\n    var link = \"\";\n    if(elemento.includes(\"formato-administrativo\")){\n        link = \"/archivos/procedimientos/formatos/\"+id_administrative+\"/1\";\n    }else if(elemento.includes(\"anexo-administrativo\"))\n    {\n        link = \"/archivos/procedimientos/anexos/\"+id_administrative+\"/1\";\n    }else if(elemento.includes(\"formato-tecnico\"))\n    {\n        link = \"/archivos/procedimientos/formatos/\"+id_tecnico+\"/2\";\n    }else if(elemento.includes(\"anexo-tecnico\")){\n        link = \"/archivos/procedimientos/anexos/\"+id_tecnico+\"/2\";\n    }\n    $.ajax({\n        type: 'GET',\n        dataType: 'json',\n        url: link,\n        success: function (json)\n        {\n            if(elemento.includes(\"formato-administrativo\")){\n                $(\"#\" + elemento).select2(\"val\",null);\n                agregarFormato(listaArchivos,json)\n            }else if(elemento.includes(\"anexo-administrativo\"))\n            {\n                $(\"#\" + elemento).select2(\"val\",null);\n                agregarAnexos(listaAnexos,json)\n            }else if(elemento.includes(\"formato-tecnico\"))\n            {\n                $(\"#\" + elemento).select2(\"val\",null);\n                agregarFormato(listaArchivos,json)\n            }else if(elemento.includes(\"anexo-tecnico\")){\n                $(\"#\" + elemento).select2(\"val\",null);\n                agregarAnexos(listaAnexos,json)\n            }\n        },\n        error: function (json){\n            swal(\"Error\", json, \"error\");\n        },\n    })\n}\n\nfunction procedureType()\n{\n    if(!document.URL.includes('administrativos'||'tecnicos')){\n        return url_type;\n    }\n    return document.URL.includes('administrativos') ? 'administrativo':'tecnico';\n}\nfunction initData()\n{\n    $('#procedimiento-'+procedureType()+'-formato').select2({\n        placeholder: \"Seleccione un procedimiento\"\n    });\n    $('#archivo-formato-'+procedureType()+'').select2({\n        placeholder: \"Seleccione Un formato\",\n    })\n\n    $('#procedimiento-'+procedureType()+'-anexo').select2({\n        placeholder: \"Seleccione un procedimiento\"\n    });\n    $('#archivo-anexo-'+procedureType()+'').select2({\n        placeholder: \"Seleccione un anexo\",\n    })\n    var url_formato = \"/informacion/formato/\"+procedureType()+\"/\"\n    var url_anexo = \"/informacion/anexo/\"+procedureType()+\"/\"\n    $(\"#archivo-formato-\"+procedureType()+\"\").empty()\n    $(\"#archivo-anexo-\"+procedureType()+\"\").empty()\n    var id_procedure_formato = $(\"#procedimiento-\"+procedureType()+\"-formato\").val()\n    var id_procedure_anexo = $(\"#procedimiento-\"+procedureType()+\"-anexo\").val()\n    url_formato = url_formato + id_procedure_formato;\n    url_anexo = url_anexo + id_procedure_anexo;\n    $.ajax({\n        type: 'GET',\n        dataType: 'json',\n        url: url_formato,\n        success: function (json)\n        {\n            var obj = json;\n            var arr = [];\n            for (elem in obj) {\n                arr.push(obj[elem]);\n            }\n            $(\"#archivo-formato-\"+procedureType()+\"\").select2({placeholder: \"Seleccione uno o varios formatos\", data: arr});\n        },\n    })\n    $.ajax({\n        type: 'GET',\n        dataType: 'json',\n        url: url_anexo,\n        success: function (data)\n        {\n            var obj = data;\n            var arr = [];\n            for (elem in obj) {\n                arr.push(obj[elem]);\n            }\n            $(\"#archivo-anexo-\"+procedureType()+\"\").select2({placeholder: \"Seleccione uno o varios anexos\", data: arr});\n        },\n    })\n}\n"],"sourceRoot":"/source/"}