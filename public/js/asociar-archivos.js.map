{"version":3,"sources":["asociar_archivos.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"asociar-archivos.js","sourcesContent":["\r\n/**\r\n * Created by otro on 4/11/16.\r\n */\r\n$(document).ready(function ()\r\n{\r\n    initData()\r\n});\r\nfunction changedata(elemen_id, second_element, url)\r\n{\r\n    $(\"#\" + second_element).removeAttr('disabled', false)\r\n    $(\"#\" + second_element).empty()\r\n    var id_procedure = $(\"#\" + elemen_id).val();\r\n    url = url + id_procedure;\r\n    $.ajax({\r\n        type: 'GET',\r\n        dataType: 'json',\r\n        url: url,\r\n        success: function (json)\r\n        {\r\n            var obj = json;\r\n            var arr = [];\r\n            for (elem in obj) {\r\n                arr.push(obj[elem]);\r\n            }\r\n            $(\"#\" + second_element).select2({placeholder: \"Seleccione uno o varios formatos\", data: arr});\r\n        },\r\n    })\r\n}\r\n/**\r\n * Asociar procedimiento con archivo\r\n *\r\n * @param url\r\n * @param file_tipe\r\n * @param id_procedure\r\n */\r\nfunction asociar(url, second_el)\r\n{\r\n    var second_element = $(\"#\" + second_el);\r\n    var files = second_element.val();\r\n    var csrf = $(\"meta[name='csrf_token']\").attr('content');\r\n    if(files == null){\r\n        swal(\"Error\", \"Tienes que seleccionar uno o mas archivos\", \"error\");\r\n    }else{\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: url,\r\n            headers: {\r\n                'X-CSRF-Token': csrf,\r\n            },\r\n            data: {\r\n                files: files,\r\n            },\r\n            success: function ()\r\n            {\r\n                refreshlist(second_el)\r\n            },\r\n            error: function (data)\r\n            {\r\n                swal(\"Error\", \"data\", \"error\");\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction refreshlist(elemento){\r\n    var link = \"\";\r\n    if(elemento.includes(\"formato-administrativo\")){\r\n        link = \"/archivos/procedimientos/formatos/\"+id_administrative+\"/1\";\r\n    }else if(elemento.includes(\"anexo-administrativo\"))\r\n    {\r\n        link = \"/archivos/procedimientos/anexos/\"+id_administrative+\"/1\";\r\n    }else if(elemento.includes(\"formato-tecnico\"))\r\n    {\r\n        link = \"/archivos/procedimientos/formatos/\"+id_tecnico+\"/2\";\r\n    }else if(elemento.includes(\"anexo-tecnico\")){\r\n        link = \"/archivos/procedimientos/anexos/\"+id_tecnico+\"/2\";\r\n    }\r\n    $.ajax({\r\n        type: 'GET',\r\n        dataType: 'json',\r\n        url: link,\r\n        success: function (json)\r\n        {\r\n            if(elemento.includes(\"formato-administrativo\")){\r\n                $(\"#\" + elemento).select2(\"val\",null);\r\n                agregarFormato(listaArchivos,json)\r\n            }else if(elemento.includes(\"anexo-administrativo\"))\r\n            {\r\n                $(\"#\" + elemento).select2(\"val\",null);\r\n                agregarAnexos(listaAnexos,json)\r\n            }else if(elemento.includes(\"formato-tecnico\"))\r\n            {\r\n                $(\"#\" + elemento).select2(\"val\",null);\r\n                agregarFormato(listaArchivos,json)\r\n            }else if(elemento.includes(\"anexo-tecnico\")){\r\n                $(\"#\" + elemento).select2(\"val\",null);\r\n                agregarAnexos(listaAnexos,json)\r\n            }\r\n        },\r\n        error: function (json){\r\n            swal(\"Error\", json, \"error\");\r\n        },\r\n    })\r\n}\r\n\r\nfunction procedureType()\r\n{\r\n    if(!document.URL.includes('administrativos'||'tecnicos')){\r\n        return url_type;\r\n    }\r\n    return document.URL.includes('administrativos') ? 'administrativo':'tecnico';\r\n}\r\nfunction initData()\r\n{\r\n    $('#procedimiento-'+procedureType()+'-formato').select2({\r\n        placeholder: \"Seleccione un procedimiento\"\r\n    });\r\n    $('#archivo-formato-'+procedureType()+'').select2({\r\n        placeholder: \"Seleccione Un formato\",\r\n    })\r\n\r\n    $('#procedimiento-'+procedureType()+'-anexo').select2({\r\n        placeholder: \"Seleccione un procedimiento\"\r\n    });\r\n    $('#archivo-anexo-'+procedureType()+'').select2({\r\n        placeholder: \"Seleccione un anexo\",\r\n    })\r\n    var url_formato = \"/informacion/formato/\"+procedureType()+\"/\"\r\n    var url_anexo = \"/informacion/anexo/\"+procedureType()+\"/\"\r\n    $(\"#archivo-formato-\"+procedureType()+\"\").empty()\r\n    $(\"#archivo-anexo-\"+procedureType()+\"\").empty()\r\n    var id_procedure_formato = $(\"#procedimiento-\"+procedureType()+\"-formato\").val()\r\n    var id_procedure_anexo = $(\"#procedimiento-\"+procedureType()+\"-anexo\").val()\r\n    url_formato = url_formato + id_procedure_formato;\r\n    url_anexo = url_anexo + id_procedure_anexo;\r\n    $.ajax({\r\n        type: 'GET',\r\n        dataType: 'json',\r\n        url: url_formato,\r\n        success: function (json)\r\n        {\r\n            var obj = json;\r\n            var arr = [];\r\n            for (elem in obj) {\r\n                arr.push(obj[elem]);\r\n            }\r\n            $(\"#archivo-formato-\"+procedureType()+\"\").select2({placeholder: \"Seleccione uno o varios formatos\", data: arr});\r\n        },\r\n    })\r\n    $.ajax({\r\n        type: 'GET',\r\n        dataType: 'json',\r\n        url: url_anexo,\r\n        success: function (data)\r\n        {\r\n            var obj = data;\r\n            var arr = [];\r\n            for (elem in obj) {\r\n                arr.push(obj[elem]);\r\n            }\r\n            $(\"#archivo-anexo-\"+procedureType()+\"\").select2({placeholder: \"Seleccione uno o varios anexos\", data: arr});\r\n        },\r\n    })\r\n}\r\n"],"sourceRoot":"/source/"}