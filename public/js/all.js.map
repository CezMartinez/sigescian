{"version":3,"sources":["AdministrativeScript.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["var listaArchivos= [];\nvar listaFlujogramas= [];\nvar listaAnexos= [];\nvar listaProcedimientos= [];\nvar url;\nvar procedureId = '{{$administrativo->id}}';\nvar radioValue;\nDropzone.options.uploadFile= {\n        maxFilesize: 2, // MB\n        parallelUploads: 1,\n        acceptedFiles: \".pdf,.docx\",\n        init: function(){\n            this.on(\"addedfile\", function() {\n                radioValue =  $(\"input[name='type']:checked\"). val();\n                if(radioValue === undefined){\n                    swal(\"Error\",'Debe Seleccionar un tipo de archivo',\"error\");\n                    this.removeAllFiles(true);\n                };\n                if(radioValue==1){\n                    url = \"/archivos/procedimientos/formatos/\"+procedureId+'/1';\n                }\n                if(radioValue==2){\n                    url = \"/archivos/procedimientos/flujograma/\"+procedureId;\n                }\n                if(radioValue==3){\n                    url = \"/archivos/procedimientos/anexos/\"+procedureId+'/1';\n                }\n                if(radioValue==4){\n                    url = \"/archivos/procedimientos/procedimiento/\"+procedureId+'/1';\n                }\n                $('#type_hidden').val(radioValue);\n                // Create the remove button\n            }).ontimeout;\n            this.on(\"success\", function(file, responseText){\n                $.ajax({\n                        type:'GET',\n                        url:url,\n                        success: function(data){\n                        },\n                    })\n                    .done(function(data){\n                        var radioValue = $(\"input[name='type']:checked\"). val();\n                        if(radioValue==1){\n                            listaArchivos=[];\n                            listaArchivos.push('<div class=\"lista-formatos\">')\n                            $.each(data, function(i, item){\n                                listaArchivos.push('<li id=\"file-formato-'+item.id+'\" class=\"list-group-item list-group-item-info\">'+\n                                    '<a target=\"_blank\" href=\"/archivos/procedimientos/administrativos/1/1/'+item.originalName+'\">'+\n                                    item.title+'</a>'+\n                                    '<i class=\"fa fa-times pull-right\" onclick=\"deleteFile(\\''+\n                                    item.originalName+'\\',\\'{{$administrativo->id}}\\',\\''+item.id+'\\''+\n                                    ',\\'formato\\',\\'/procedimiento/archivos/formato/\\')\"></i></li>')\n                            });\n                            listaArchivos.push('</div>')\n\n                            $('div.lista-formatos').replaceWith(listaArchivos.join(''));\n                            swal(\"Agregado\",'El formato fue agregado con exito',\"success\");\n                        }\n                        if(radioValue==2){\n                            listaFlujogramas=[];\n                            listaFlujogramas.pop();\n                            listaFlujogramas.push('<div class=\"lista-flujogramas\">')\n                            $.each(data, function(i, item){\n                                listaFlujogramas.push('' +\n                                    '<li id=\"file-flujograma-'+item.id+'\" class=\"list-group-item list-group-item-info\">'+\n                                    '<a target=\"_blank\" href=\"/archivos/procedimientos/administrativos/2/1/'+item.originalName+'\">'+\n                                    item.title+'</a>'+\n                                    '<i class=\"fa fa-times pull-right\" onclick=\"deleteFile(\\''+\n                                    item.originalName+'\\',\\'{{$administrativo->id}}\\',\\''+item.id+'\\''+\n                                    ',\\'flujograma\\',\\'/procedimiento/archivos/flujograma/\\')\"></i></li>')\n                            });\n                            listaFlujogramas.push('</div>')\n\n                            $('div.lista-flujogramas').replaceWith(listaFlujogramas.join(''));\n                            swal(\"Agregado\",'El Flujograma fue agregado con exito',\"success\");\n                        }\n                        if(radioValue==3){\n                            listaAnexos=[];\n                            listaAnexos.push('<div class=\"lista-anexos\">')\n                            $.each(data, function(i, item){\n                                listaAnexos.push(\n                                    '<li id=\"file-anexo-'+item.id+'\" ' +\n                                    'class=\"list-group-item list-group-item-info\">'+\n                                    '<a target=\"_blank\" href=\"/archivos/procedimientos/administrativos/3/1/' +item.originalName+ '\">'\n                                    +item.title+\n                                    '</a>'+\n                                    '<i class=\"fa fa-times pull-right\" ' +\n                                    'onclick=\"deleteFile(\\'' +item.originalName+ '\\',\\'{{$administrativo->id}}\\',\\'' +item.id+ '\\''+\n                                    ',\\'anexo\\',\\'/procedimiento/archivos/anexo/\\')\">' +\n                                    '</i>' +\n                                    '</li>')\n                            });\n                            listaAnexos.push('</div>')\n\n                            $('div.lista-anexos').replaceWith(listaAnexos.join(''));\n                            swal(\"Agregado\",'El Anexo fue agregado con exito',\"success\");\n                        }\n                        if(radioValue==4){\n                            listaProcedimientos=[];\n                            listaProcedimientos.push('<div class=\"lista-procedimientos\">')\n                            $.each(data, function(i, item){\n                                listaProcedimientos.push(\n                                    '<li id=\"file-procedimiento-'+item.id+'\" ' +\n                                    'class=\"list-group-item list-group-item-info\">'+\n                                    '<a target=\"_blank\" href=\"/archivos/procedimientos/administrativos/4/1/' +item.originalName+ '\">'\n                                    +item.title+\n                                    '</a>'+\n                                    '<i class=\"fa fa-times pull-right\" ' +\n                                    'onclick=\"deleteFile(\\'' +item.originalName+ '\\',\\'{{$administrativo->id}}\\',\\'' +item.id+ '\\''+\n                                    ',\\'procedimiento\\',\\'/procedimiento/archivos/procedimiento/\\')\">' +\n                                    '</i>' +\n                                    '</li>')\n                            });\n                            listaProcedimientos.push('</div>')\n\n                            $('div.lista-procedimientos').replaceWith(listaProcedimientos.join(''));\n                            swal(\"Agregado\",'El Documento del Procedimiento fue agregado con exito',\"success\");\n                        }\n\n\n                    })\n                    .error(function(data){\n                        console.log(data);\n                        swal(\"Error\",data.responseText,\"error\");\n                    });\n                var self = this;\n                setTimeout(function(){\n                    self.removeFile(file);\n                },3500);\n            });\n        }\n    }\n\n    function deleteFile(nameFile,idProcedure,idAnnexedFile,tipo, url){\n        var csrf = $(\"meta[name='csrf_token']\").attr('content');\n\n        swal({\n                title: \"Â¿Esta seguro de eliminar \"+nameFile+\"?\",\n                text: \"Esta accion no puede ser revertida\",\n                type: \"warning\",\n                showCancelButton: true,\n                confirmButtonColor: \"#3c3cf2\",\n                confirmButtonText: \"Eliminar\",\n                cancelButtonText: \"Cancelar\",\n                closeOnConfirm:false,\n                closeOnCancel:false,\n            },\n            function(isConfirm){\n                if (isConfirm) {\n                    $.ajax({\n                            type:'DELETE',\n                            url:url+idProcedure+'/'+idAnnexedFile+'/1',\n                            headers: {\n                                'X-CSRF-Token': csrf,\n                            },\n                            success: function(data){\n\n                            },\n                        })\n                        .done(function(data){\n                            $('#file-'+''+tipo+'-'+idAnnexedFile).fadeOut();\n                            swal(\"Eliminado\",data,\"success\");\n                        })\n                        .error(function(data){\n                            swal(\"Error\",data.responseText,\"error\");\n                        });\n                }else {\n                    swal(\"Cancelado\",\"El registro no ha sido modificado.\",\"error\");\n                }\n            });\n    }"],"sourceRoot":"/source/"}