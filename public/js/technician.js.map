{"version":3,"sources":["TechnicianScript.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"technician.js","sourcesContent":["var listaProcedimientos= [];\r\nvar listaArchivos= [];\r\nvar listaAnexos= [];\r\nvar url;\r\nvar procedureId = id_tecnico;\r\nvar radioValue;\r\n\r\nDropzone.options.uploadFile= {\r\n    maxFilesize: 2, // MB\r\n    parallelUploads: 1,\r\n    dictDefaultMessage: \"Seleccione un tipo de archivo y seleccione o arrestrelo aqui\",\r\n    acceptedFiles: \".pdf,.docx\",\r\n    init: function(){\r\n        this.on(\"addedfile\", function() {\r\n            radioValue =  $(\"input[name='type']:checked\"). val();\r\n            if(radioValue === undefined){\r\n                swal(\"Error\",'Debe Seleccionar un tipo de archivo',\"error\");\r\n                this.removeAllFiles(true);\r\n            };\r\n            if(radioValue==1){\r\n                url = \"/archivos/procedimientos/formatos/\"+procedureId+'/2';\r\n            }\r\n            if(radioValue==3){\r\n                url = \"/archivos/procedimientos/anexos/\"+procedureId+'/2';\r\n            }\r\n            if(radioValue==4){\r\n                url = \"/archivos/procedimientos/procedimiento/\"+procedureId+'/2';\r\n            }\r\n            $('#type_hidden').val(radioValue);\r\n            // Create the remove button\r\n        }).ontimeout;\r\n        this.on(\"success\", function(file, responseText){\r\n            $.ajax({\r\n                type:'GET',\r\n                url:url,\r\n                success: function(data){\r\n                },\r\n            })\r\n                .done(function(data){\r\n                    var radioValue = $(\"input[name='type']:checked\"). val();\r\n                    if(radioValue == 1){\r\n                        agregarFormato(listaArchivos,data);\r\n                    }\r\n                    if(radioValue == 3){\r\n                        agregarAnexos(listaAnexos,data);\r\n                    }\r\n                    if (radioValue==4){\r\n                        agregarProcedimiento(listaProcedimientos,data);\r\n                    }\r\n                })\r\n                .error(function(data){\r\n                    swal(\"Error\",data.responseText,\"error\");\r\n                });\r\n            var self = this;\r\n            setTimeout(function(){\r\n                self.removeFile(file);\r\n            },3500);\r\n        });\r\n        this.on(\"error\", function(file){\r\n            var self = this;\r\n            setTimeout(function(){\r\n                self.removeFile(file);\r\n            },5500);\r\n        });\r\n    }\r\n}\r\n\r\nfunction deleteFile(nameFile,idProcedure,idAnnexedFile,tipo, url){\r\n    var csrf = $(\"meta[name='csrf_token']\").attr('content');\r\n\r\n    swal({\r\n            title: \"¿Esta seguro de eliminar \"+nameFile+\"?\",\r\n            text: \"Esta accion eliminara toda relacion con otros procedimientos, si existen, y no podra ser revertida.\\n ¿Desea continuar?\",\r\n            type: \"warning\",\r\n            showCancelButton: true,\r\n            confirmButtonColor: \"#3c3cf2\",\r\n            confirmButtonText: \"Eliminar\",\r\n            cancelButtonText: \"Cancelar\",\r\n            closeOnConfirm:false,\r\n            closeOnCancel:false,\r\n        },\r\n        function(isConfirm){\r\n            if (isConfirm) {\r\n                $.ajax({\r\n                    type:'DELETE',\r\n                    url:url+idProcedure+'/'+idAnnexedFile+'/2',\r\n                    headers: {\r\n                        'X-CSRF-Token': csrf,\r\n                    },\r\n                    success: function(data){\r\n\r\n                    },\r\n                })\r\n                    .done(function(data){\r\n                        $('#file-'+''+tipo+'-'+idAnnexedFile).fadeOut();\r\n                        swal(\"Eliminado\",data,\"success\");\r\n                    })\r\n                    .error(function(data){\r\n                        swal(\"Error\",data.responseText,\"error\");\r\n                    });\r\n            }else {\r\n                swal(\"Cancelado\",\"El registro no ha sido modificado.\",\"error\");\r\n            }\r\n        });\r\n}\r\n\r\nfunction agregarAnexos(listaAnexos,data)\r\n{\r\n    listaAnexos = [];\r\n    listaAnexos.push('<div class=\"lista-anexos\">')\r\n    $.each(data, function (i, item)\r\n    {\r\n        listaAnexos.push(\r\n            '<li id=\"file-anexo-' + item.id + '\" ' +\r\n            'class=\"list-group-item list-group-item-'+owner(item.pivot.owner)+'\">' +\r\n            '<a target=\"_blank\" href=\"/archivos/procedimientos/3/2/' + item.originalName + '\">'\r\n            + item.title +\r\n            '</a>' +\r\n            '<i class=\"fa fa-times pull-right\" ' +\r\n            'onclick=\"deleteFile(\\'' + item.originalName + '\\',\\'' + id_tecnico + '\\',\\'' + item.id + '\\'' +\r\n            ',\\'anexo\\',\\'/procedimiento/archivos/anexo/\\')\">' +\r\n            '</i>' +\r\n            '</li>')\r\n    });\r\n    listaAnexos.push('</div>')\r\n\r\n    $('div.lista-anexos').replaceWith(listaAnexos.join(''));\r\n    swal(\"Agregado\", 'El Anexo fue agregado con exito', \"success\");\r\n}\r\nfunction agregarFormato(listaArchivos,data)\r\n{\r\n    listaArchivos = [];\r\n    listaArchivos.push('<div class=\"lista-formatos\">')\r\n    $.each(data, function (i, item)\r\n    {\r\n        listaArchivos.push('<li id=\"file-formato-' + item.id + '\" class=\"list-group-item list-group-item-'+owner(item.pivot.owner)+'\">' +\r\n            '<a target=\"_blank\" href=\"/archivos/procedimientos/1/2/' + item.originalName + ' \">' +\r\n            item.title + '</a>' +\r\n            '<i class=\"fa fa-times pull-right\" onclick=\"deleteFile(\\'' +\r\n            item.originalName + '\\',\\'' + id_tecnico + '\\',\\'' + item.id + '\\'' +\r\n            ',\\'formato\\',\\'/procedimiento/archivos/formato/\\')\"></i></li>')\r\n    });\r\n    listaArchivos.push('</div>')\r\n\r\n    $('div.lista-formatos').replaceWith(listaArchivos.join(''));\r\n    swal(\"Agregado\", 'El formato fue agregado con exito', \"success\");\r\n}\r\nfunction agregarProcedimiento(listaProcedimientos,data)\r\n{\r\n    listaProcedimientos = [];\r\n    listaProcedimientos.push('<div class=\"lista-procedimientos\">')\r\n    $.each(data, function (i, item)\r\n    {\r\n        listaProcedimientos.push(\r\n            '<li id=\"file-procedimiento-' + item.id + '\" ' +\r\n            'class=\"list-group-item list-group-item-info\">' +\r\n            '<a target=\"_blank\" href=\"/archivos/procedimientos/4/2/' + item.originalName + '\">'\r\n            + item.title +\r\n            '</a>' +\r\n            /*'<i class=\"fa fa-times pull-right\" ' +\r\n            'onclick=\"deleteFile(\\'' + item.originalName + '\\',\\'' + id_tecnico + '\\',\\'' + item.id + '\\'' +\r\n            ',\\'procedimiento\\',\\'/procedimiento/archivos/procedimiento/\\')\">' +\r\n            '</i>' +*/\r\n            '</li>')\r\n    });\r\n    listaProcedimientos.push('</div>')\r\n\r\n    $('div.lista-procedimientos').replaceWith(listaProcedimientos.join(''));\r\n    swal(\"Agregado\", 'El Documento del Procedimiento fue agregado con exito', \"success\");\r\n}\r\n\r\nfunction owner(data){\r\n    return (data == 1) ? 'info':'success';\r\n}\r\n\r\n"],"sourceRoot":"/source/"}